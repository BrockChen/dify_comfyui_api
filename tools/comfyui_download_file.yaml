identity:
  name: "comfyui_download_file"
  author: "brockchen"
  label:
    en_US: "ComfyUI Download File"
    zh_Hans: "ComfyUI 下载文件"
description:
  human:
    en_US: "Download a file from ComfyUI and upload it to Dify storage. Supports images and videos. Skips download if file already exists in Dify storage."
    zh_Hans: "从 ComfyUI 下载文件并上传到 Dify 存储。支持图片和视频。如果文件已在 Dify 存储中存在则跳过下载。"
  llm: "Download a file from ComfyUI server and upload it to Dify storage. Supports images and videos. Automatically checks if file exists in Dify storage before downloading and skips if already present."
parameters:
  - name: filename
    type: string
    required: true
    label:
      en_US: Filename
      zh_Hans: 文件名
    human_description:
      en_US: "The filename of the file in ComfyUI to download."
      zh_Hans: "要下载的 ComfyUI 中的文件名。"
    llm_description: "The filename of the file in ComfyUI that needs to be downloaded. This should be the exact filename as stored in ComfyUI."
    form: llm
  - name: subfolder
    type: string
    required: false
    label:
      en_US: Subfolder
      zh_Hans: 子文件夹
    human_description:
      en_US: "Optional subfolder path in ComfyUI where the file is located."
      zh_Hans: "ComfyUI 中文件所在的子文件夹路径（可选）。"
    llm_description: "Optional subfolder path in ComfyUI where the file is located. Leave empty if file is in root folder."
    form: llm
  - name: file_type
    type: string
    required: false
    label:
      en_US: File Type
      zh_Hans: 文件类型
    human_description:
      en_US: "File type in ComfyUI: 'input', 'output', or 'temp'. Default is 'output'."
      zh_Hans: "ComfyUI 中的文件类型：'input'、'output' 或 'temp'。默认为 'output'。"
    llm_description: "File type in ComfyUI: 'input' for input files, 'output' for output files, or 'temp' for temporary files. Default is 'output'."
    form: llm
  - name: prompt_id
    type: string
    required: false
    label:
      en_US: Prompt ID
      zh_Hans: 提示 ID
    human_description:
      en_US: "Optional prompt_id if downloading from a specific workflow execution."
      zh_Hans: "如果从特定工作流执行中下载，可选的 prompt_id。"
    llm_description: "Optional prompt_id if the file is associated with a specific workflow execution. This can be used for validation or context."
    form: llm
output_schema:
  type: object
  properties:
    status:
      type: string
      description: "Download status: success or error"
    url:
      type: string
      description: "The URL of the file in Dify storage"
    filename:
      type: string
      description: "The filename"
    skipped:
      type: boolean
      description: "Whether the download was skipped because file already exists in Dify storage"
    message:
      type: string
      description: "Status message"
extra:
  python:
    source: tools/comfyui_download_file.py

